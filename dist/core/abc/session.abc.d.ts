import { IMediaConverter } from '@waha/core/media/IConverter';
import { IgnoreJidConfig, JidFilter } from '@waha/core/utils/jids';
import { Channel, ChannelListResult, ChannelMessage, ChannelSearchByText, ChannelSearchByView, CreateChannelRequest, ListChannelsQuery, PreviewChannelMessages } from '@waha/structures/channels.dto';
import { ChatSummary, GetChatMessageQuery, GetChatMessagesFilter, GetChatMessagesQuery, OverviewFilter, ReadChatMessagesQuery, ReadChatMessagesResponse } from '@waha/structures/chats.dto';
import { SendButtonsRequest } from '@waha/structures/chatting.buttons.dto';
import { SendListRequest } from '@waha/structures/chatting.list.dto';
import { BinaryFile, RemoteFile } from '@waha/structures/files.dto';
import { Label, LabelDTO, LabelID } from '@waha/structures/labels.dto';
import { LidToPhoneNumber } from '@waha/structures/lids.dto';
import { PaginationParams } from '@waha/structures/pagination.dto';
import { MessageSource, WAMessage } from '@waha/structures/responses.dto';
import { BrowserTraceQuery } from '@waha/structures/server.debug.dto';
import { DefaultMap } from '@waha/utils/DefaultMap';
import { LoggerBuilder } from '@waha/utils/logging';
import { SwitchObservable } from '@waha/utils/reactive/SwitchObservable';
import * as NodeCache from 'node-cache';
import { Logger } from 'pino';
import { MessageId } from 'whatsapp-web.js';
import { ChatRequest, CheckNumberStatusQuery, EditMessageRequest, MessageButtonReply, MessageContactVcardRequest, MessageFileRequest, MessageForwardRequest, MessageImageRequest, MessageLinkCustomPreviewRequest, MessageLinkPreviewRequest, MessageLocationRequest, MessagePollRequest, MessagePollVoteRequest, MessageReactionRequest, MessageReplyRequest, MessageStarRequest, MessageTextRequest, MessageVideoRequest, MessageVoiceRequest, SendSeenRequest } from '../../structures/chatting.dto';
import { ContactQuery, ContactRequest, ContactUpdateBody } from '../../structures/contacts.dto';
import { WAHAEngine, WAHAEvents, WAHAPresenceStatus, WAHASessionStatus } from '../../structures/enums.dto';
import { EventMessageRequest } from '../../structures/events.dto';
import { CreateGroupRequest, GroupParticipant, GroupsListFields, ParticipantsRequest, SettingsSecurityChangeInfo } from '../../structures/groups.dto';
import { WAHAChatPresences } from '../../structures/presence.dto';
import { MeInfo, ProxyConfig, SessionConfig } from '../../structures/sessions.dto';
import { DeleteStatusRequest, ImageStatus, TextStatus, VideoStatus, VoiceStatus } from '../../structures/status.dto';
import { IMediaManager } from '../media/IMediaManager';
import { QR } from '../QR';
import { DataStore } from './DataStore';
export declare function getBrowserExecutablePath(): "/usr/bin/google-chrome-stable" | "/usr/bin/chromium";
export declare function ensureSuffix(phone: any): any;
export interface SessionParams {
    name: string;
    printQR: boolean;
    mediaManager: IMediaManager;
    loggerBuilder: LoggerBuilder;
    sessionStore: DataStore;
    proxyConfig?: ProxyConfig;
    sessionConfig?: SessionConfig;
    engineConfig?: any;
    ignore: IgnoreJidConfig;
}
export declare abstract class WhatsappSession {
    engine: WAHAEngine;
    name: string;
    protected mediaManager: IMediaManager;
    loggerBuilder: LoggerBuilder;
    logger: Logger;
    protected sessionStore: DataStore;
    protected proxyConfig?: ProxyConfig;
    sessionConfig?: SessionConfig;
    protected engineConfig?: any;
    protected unpairing: boolean;
    protected jids: JidFilter;
    private _status;
    private _presence;
    private lastActivityTimestamp?;
    protected presenceAutoOnlineConfig: {
        enabled: boolean;
        duration: number;
    };
    private shouldPrintQR;
    protected events2: DefaultMap<WAHAEvents, SwitchObservable<any>>;
    private status$;
    protected profilePictures: NodeCache;
    private sentMessageIds;
    private presenceOfflineTimeout?;
    mediaConverter: IMediaConverter;
    constructor({ name, printQR, loggerBuilder, sessionStore, proxyConfig, mediaManager, sessionConfig, engineConfig, ignore, }: SessionParams);
    getEventObservable(event: WAHAEvents): SwitchObservable<any>;
    set status(value: WAHASessionStatus);
    get status(): WAHASessionStatus;
    protected set presence(value: WAHAPresenceStatus);
    get presence(): WAHAPresenceStatus.ONLINE | WAHAPresenceStatus.OFFLINE | null;
    getBrowserExecutablePath(): "/usr/bin/google-chrome-stable" | "/usr/bin/chromium";
    getBrowserArgsForPuppeteer(): string[];
    protected isDebugEnabled(): boolean;
    abstract start(): any;
    abstract stop(): Promise<void>;
    protected stopEvents(): void;
    unpair(): Promise<void>;
    browserTrace(query: BrowserTraceQuery): Promise<string>;
    getQR(): QR;
    requestCode(phoneNumber: string, method: string, params?: any): void;
    abstract getScreenshot(): Promise<Buffer>;
    getSessionMeInfo(): MeInfo | null;
    setProfileName(name: string): Promise<boolean>;
    setProfileStatus(status: string): Promise<boolean>;
    updateProfilePicture(file: BinaryFile | RemoteFile | null): Promise<boolean>;
    protected refreshMyProfilePicture(): Promise<void>;
    protected setProfilePicture(file: BinaryFile | RemoteFile): Promise<boolean>;
    protected deleteProfilePicture(): Promise<boolean>;
    generateNewMessageId(): Promise<string>;
    abstract checkNumberStatus(request: CheckNumberStatusQuery): any;
    abstract sendText(request: MessageTextRequest): any;
    sendContactVCard(request: MessageContactVcardRequest): void;
    sendPoll(request: MessagePollRequest): void;
    sendPollVote(request: MessagePollVoteRequest): void;
    abstract sendLocation(request: MessageLocationRequest): any;
    sendLinkPreview(request: MessageLinkPreviewRequest): void;
    sendLinkCustomPreview(request: MessageLinkCustomPreviewRequest): Promise<any>;
    abstract forwardMessage(request: MessageForwardRequest): Promise<WAMessage>;
    abstract sendImage(request: MessageImageRequest): any;
    abstract sendFile(request: MessageFileRequest): any;
    abstract sendVoice(request: MessageVoiceRequest): any;
    sendVideo(request: MessageVideoRequest): void;
    sendButtons(request: SendButtonsRequest): void;
    sendList(request: SendListRequest): Promise<any>;
    sendButtonsReply(request: MessageButtonReply): void;
    abstract reply(request: MessageReplyRequest): any;
    abstract sendSeen(chat: SendSeenRequest): any;
    abstract startTyping(chat: ChatRequest): Promise<void>;
    abstract stopTyping(chat: ChatRequest): any;
    getLastActivityTimestamp(): number | undefined;
    maintainPresenceOnline(): Promise<void>;
    protected cleanupPresenceTimeout(): void;
    abstract setReaction(request: MessageReactionRequest): any;
    setStar(request: MessageStarRequest): Promise<void>;
    sendEvent(request: EventMessageRequest): Promise<WAMessage>;
    cancelEvent(eventId: string): Promise<WAMessage>;
    rejectCall(from: string, id: string): Promise<void>;
    getChats(pagination: PaginationParams): void;
    getChatsOverview(pagination: PaginationParams, filter?: OverviewFilter): Promise<ChatSummary[]>;
    deleteChat(chatId: any): void;
    getChatMessages(chatId: string, query: GetChatMessagesQuery, filter: GetChatMessagesFilter): Promise<WAMessage[]>;
    abstract readChatMessages(chatId: string, request: ReadChatMessagesQuery): Promise<ReadChatMessagesResponse>;
    protected readChatMessagesWSImpl(chatId: string, request: ReadChatMessagesQuery): Promise<ReadChatMessagesResponse>;
    getChatMessage(chatId: string, messageId: string, query: GetChatMessageQuery): Promise<null | WAMessage>;
    pinMessage(chatId: string, messageId: string, duration: number): Promise<boolean>;
    unpinMessage(chatId: string, messageId: string): Promise<boolean>;
    deleteMessage(chatId: string, messageId: string): void;
    editMessage(chatId: string, messageId: string, request: EditMessageRequest): void;
    clearMessages(chatId: any): void;
    chatsArchiveChat(chatId: string): Promise<any>;
    chatsUnarchiveChat(chatId: string): Promise<any>;
    chatsUnreadChat(chatId: string): Promise<any>;
    getLabel(labelId: string): Promise<Label | undefined>;
    getLabels(): Promise<Label[]>;
    createLabel(label: LabelDTO): Promise<Label>;
    updateLabel(label: Label): Promise<Label>;
    deleteLabel(label: Label): Promise<void>;
    getChatsByLabelId(labelId: string): void;
    getChatLabels(chatId: string): Promise<Label[]>;
    putLabelsToChat(chatId: string, labels: LabelID[]): void;
    upsertContact(chatId: string, body: ContactUpdateBody): Promise<void>;
    getContact(query: ContactQuery): void;
    getContacts(pagination: PaginationParams): void;
    getContactAbout(query: ContactQuery): Promise<{
        about: string;
    }>;
    getAllLids(pagination: PaginationParams): Promise<Array<LidToPhoneNumber>>;
    getLidsCount(): Promise<number>;
    findPNByLid(lid: string): Promise<LidToPhoneNumber>;
    findLIDByPhoneNumber(phoneNumber: string): Promise<LidToPhoneNumber>;
    abstract fetchContactProfilePicture(id: string): Promise<string | null>;
    getContactProfilePicture(id: string, refresh: boolean): Promise<string | null>;
    protected refreshProfilePicture(id: string): Promise<any>;
    blockContact(request: ContactRequest): void;
    unblockContact(request: ContactRequest): void;
    createGroup(request: CreateGroupRequest): void;
    joinGroup(code: string): Promise<string>;
    joinInfoGroup(code: string): Promise<any>;
    getGroups(pagination: PaginationParams): Promise<any>;
    filterGroupsFields(data: any, fields: GroupsListFields): any;
    protected removeGroupsFieldParticipant(group: any): void;
    refreshGroups(): Promise<boolean>;
    getGroup(id: any): void;
    getGroupParticipants(id: string): Promise<GroupParticipant[]>;
    getInfoAdminsOnly(id: any): Promise<SettingsSecurityChangeInfo>;
    setInfoAdminsOnly(id: any, value: any): void;
    getMessagesAdminsOnly(id: any): Promise<SettingsSecurityChangeInfo>;
    setMessagesAdminsOnly(id: any, value: any): void;
    deleteGroup(id: any): void;
    leaveGroup(id: any): void;
    setDescription(id: any, description: any): void;
    updateGroupPicture(id: string, file: BinaryFile | RemoteFile | null): Promise<boolean>;
    protected setGroupPicture(id: string, file: BinaryFile | RemoteFile): Promise<boolean>;
    protected deleteGroupPicture(id: string): Promise<boolean>;
    setSubject(id: any, description: any): void;
    getInviteCode(id: any): Promise<string>;
    revokeInviteCode(id: any): Promise<string>;
    getParticipants(id: any): void;
    addParticipants(id: any, request: ParticipantsRequest): void;
    removeParticipants(id: any, request: ParticipantsRequest): void;
    promoteParticipantsToAdmin(id: any, request: ParticipantsRequest): void;
    demoteParticipantsToUser(id: any, request: ParticipantsRequest): void;
    setPresence(presence: WAHAPresenceStatus, chatId?: string): Promise<void>;
    getPresences(): Promise<WAHAChatPresences[]>;
    getPresence(id: string): Promise<WAHAChatPresences>;
    subscribePresence(id: string): Promise<any>;
    searchChannelsByView(query: ChannelSearchByView): Promise<ChannelListResult>;
    searchChannelsByText(query: ChannelSearchByText): Promise<ChannelListResult>;
    previewChannelMessages(inviteCode: string, query: PreviewChannelMessages): Promise<ChannelMessage[]>;
    channelsList(query: ListChannelsQuery): Promise<Channel[]>;
    channelsCreateChannel(request: CreateChannelRequest): Promise<Channel>;
    channelsGetChannel(id: string): Promise<Channel>;
    channelsGetChannelByInviteCode(inviteCode: string): Promise<Channel>;
    channelsDeleteChannel(id: string): Promise<void>;
    channelsFollowChannel(id: string): Promise<void>;
    channelsUnfollowChannel(id: string): Promise<void>;
    channelsMuteChannel(id: string): Promise<void>;
    channelsUnmuteChannel(id: string): Promise<void>;
    sendTextStatus(status: TextStatus): void;
    sendImageStatus(status: ImageStatus): void;
    sendVoiceStatus(status: VoiceStatus): void;
    sendVideoStatus(status: VideoStatus): void;
    deleteStatus(request: DeleteStatusRequest): void;
    getEngineInfo(): Promise<any>;
    protected ensureSuffix(phone: any): any;
    protected deserializeId(messageId: string): MessageId;
    protected printQR(qr: QR): void;
    protected saveSentMessageId(id: string): void;
    protected getMessageSource(id: string): MessageSource;
    fetch(url: string): Promise<Buffer>;
    resolveMentionsAll(chatId: string): Promise<string[]>;
}
export declare function getGroupInviteLink(code: string): string;
export declare function parseGroupInviteLink(link: string): string;
export declare function getChannelInviteLink(code: string): string;
export declare function parseChannelInviteLink(link: string): string;
export declare function getPublicUrlFromDirectPath(directPath: string): string;
export declare function extractDeviceId(jid: string): string | null;
