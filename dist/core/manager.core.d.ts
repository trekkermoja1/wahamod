import { OnModuleInit } from '@nestjs/common';
import { IAppsService } from '@waha/apps/app_sdk/services/IAppsService';
import { EngineBootstrap } from '@waha/core/abc/EngineBootstrap';
import { GowsEngineConfigService } from '@waha/core/config/GowsEngineConfigService';
import { WebJSEngineConfigService } from '@waha/core/config/WebJSEngineConfigService';
import { MediaStorageFactory } from '@waha/core/media/MediaStorageFactory';
import { DefaultMap } from '@waha/utils/DefaultMap';
import { SwitchObservable } from '@waha/utils/reactive/SwitchObservable';
import { PinoLogger } from 'nestjs-pino';
import { Observable } from 'rxjs';
import { WhatsappConfigService } from '../config.service';
import { WAHAEngine, WAHAEvents } from '../structures/enums.dto';
import { ProxyConfig, SessionConfig, SessionDetailedInfo, SessionDTO, SessionInfo } from '../structures/sessions.dto';
import { SessionManager } from './abc/manager.abc';
import { WhatsappSession } from './abc/session.abc';
import { EngineConfigService } from './config/EngineConfigService';
export declare class SessionManagerCore extends SessionManager implements OnModuleInit {
    private engineConfigService;
    private webjsEngineConfigService;
    private mediaStorageFactory;
    SESSION_STOP_TIMEOUT: number;
    private sessions;
    private sessionConfigs;
    protected readonly EngineClass: typeof WhatsappSession;
    protected events2: DefaultMap<WAHAEvents, SwitchObservable<any>>;
    protected readonly engineBootstrap: EngineBootstrap;
    constructor(config: WhatsappConfigService, engineConfigService: EngineConfigService, webjsEngineConfigService: WebJSEngineConfigService, gowsConfigService: GowsEngineConfigService, log: PinoLogger, mediaStorageFactory: MediaStorageFactory, appsService: IAppsService);
    protected getEngine(engine: WAHAEngine): typeof WhatsappSession;
    beforeApplicationShutdown(signal?: string): Promise<void>;
    onApplicationBootstrap(): Promise<void>;
    exists(name: string): Promise<boolean>;
    isRunning(name: string): boolean;
    upsert(name: string, config?: SessionConfig): Promise<void>;
    start(name: string): Promise<SessionDTO>;
    private updateSession;
    getSessionEvent(session: string, event: WAHAEvents): Observable<any>;
    stop(name: string, silent: boolean): Promise<void>;
    unpair(name: string): Promise<void>;
    logout(name: string): Promise<void>;
    delete(name: string): Promise<void>;
    private getWebhooks;
    protected getProxyConfig(name: string): ProxyConfig | undefined;
    getSession(name: string): WhatsappSession;
    getSessions(all: boolean): Promise<SessionInfo[]>;
    private fetchEngineInfo;
    getSessionInfo(name: string): Promise<SessionDetailedInfo | null>;
    protected stopEvents(): void;
    onModuleInit(): Promise<void>;
    init(): Promise<void>;
}
