import type { BaileysEventEmitter, Chat, Contact } from '@adiwajshing/baileys';
import type { GroupMetadata } from '@adiwajshing/baileys/lib/Types/GroupMetadata';
import type { Label } from '@adiwajshing/baileys/lib/Types/Label';
import { JidFilter } from '@waha/core/utils/jids';
import { GetChatMessagesFilter, OverviewFilter } from '@waha/structures/chats.dto';
import { LidToPhoneNumber } from '@waha/structures/lids.dto';
import { LimitOffsetParams, PaginationParams } from '@waha/structures/pagination.dto';
import { Logger } from 'pino';
import { INowebStorage } from './INowebStorage';
import { INowebStore } from './INowebStore';
export declare class NowebPersistentStore implements INowebStore {
    private logger;
    storage: INowebStorage;
    private jids;
    private socket;
    private chatRepo;
    private groupRepo;
    private contactRepo;
    private messagesRepo;
    private labelsRepo;
    private labelAssociationsRepo;
    private lidRepo;
    presences: any;
    private lock;
    private groupsFetchLock;
    private lastTimeGroupUpdate;
    private lastTimeGroupFetch;
    private GROUP_METADATA_CACHE_TIME;
    constructor(logger: Logger, storage: INowebStorage, jids: JidFilter);
    init(): Promise<void>;
    bind(ev: BaileysEventEmitter, socket: any): void;
    close(): Promise<void>;
    private onMessagingHistorySet;
    private syncMessagesHistory;
    private onMessagesUpsert;
    private onMessageUpdate;
    private onMessageDelete;
    private onChatUpsert;
    private onGroupUpsert;
    private onGroupUpdate;
    private onGroupParticipantsUpdate;
    private participantUpdate;
    private onChatUpdate;
    private onChatDelete;
    private withLock;
    private withNoLock;
    private onContactsUpsert;
    private onContactUpdate;
    private onMessageReaction;
    private onMessageReceiptUpdate;
    private onLabelsEdit;
    private onLabelsAssociation;
    private onPresenceUpdate;
    loadMessage(jid: string, id: string): Promise<import("@adiwajshing/baileys").proto.WebMessageInfo>;
    getMessagesByJid(chatId: string, filter: GetChatMessagesFilter, pagination: PaginationParams): Promise<any>;
    getMessageById(chatId: string, messageId: string): Promise<any>;
    getChats(pagination: PaginationParams, broadcast: boolean, filter?: OverviewFilter): Promise<Chat[]>;
    getChat(jid: string): Promise<Chat | null>;
    private shouldFetchGroup;
    private fetchGroups;
    resetGroupsCache(): void;
    getGroups(pagination: PaginationParams): Promise<GroupMetadata[]>;
    getContactById(jid: any): Promise<Contact>;
    getContacts(pagination: PaginationParams): Promise<Contact[]>;
    getLabels(): Promise<Label[]>;
    getLabelById(labelId: string): Promise<Label | null>;
    getChatsByLabelId(labelId: string): Promise<Chat[]>;
    getChatLabels(chatId: string): Promise<Label[]>;
    private handleLidPNUpdates;
    getAllLids(pagination?: LimitOffsetParams): Promise<LidToPhoneNumber[]>;
    getLidsCount(): Promise<number>;
    findPNByLid(lid: string): Promise<string | null>;
    findLidByPN(pn: string): Promise<string | null>;
}
